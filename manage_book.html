<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PanaGhar Login</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class="bg-white font-sans">
    <div class="h-[100vh] flex">
      <!-- Left side (type) -->
      <div
        id="icon"
        class="lg:w-[350px] md:w-[300px] sm:w-[200px] lg:h-full flex flex-col lg:px-3 md:px-10 sm:px-7 w-full bg-[#efeeee]"
      >
        <img
          src="assets/green_logo.png"
          alt=""
          class="lg:w-[270px] lg:h-[80px] md:w-[350px] md:h-[55px] sm:w-[300px] sm:h-[45px] mt-6"
        />
        <!-- Upload -->
        <div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#52525B] border-0 transition duration-500 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-6 ml-3"
          >
            <i class="fa-solid fa-users"></i>
            <a class="font-semibold text-[18px]" href="">Dashboard</a>
          </div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#52525B] border-0 transition duration-500 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-1 ml-3"
          >
            <i class="fa-solid fa-arrow-up-from-bracket"></i>
            <a class="font-semibold text-[18px]" href="manage_book.html"
              >Upload Books</a
            >
          </div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#52525B] border-0 transition duration-500 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-1 ml-3"
          >
            <i class="fa-solid fa-book"></i>
            <a class="font-semibold text-[18px]" href="">Manage Books </a>
          </div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#52525B] border-0 transition duration-500 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-1 ml-3"
          >
            <i class="fa-solid fa-box"></i>
            <a class="font-semibold text-[18px]" href="">Payments</a>
          </div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#FF3D00] border-0 transition duration-500 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-1 ml-3"
          >
            <i class="fa-solid fa-right-from-bracket"></i>
            <a class="font-semibold text-[18px]" href="sign_in.html ">Logout</a>
          </div>
          <div
            class="button_upload flex items-center justify-start gap-3 p-4 text-[#52525B] border-0 transition duration-450 hover:bg-[#88965E80] rounded-lg w-[290px] h-[50px] mt-1 ml-3"
          >
            <i class="fa-regular fa-circle-question"></i>
            <a class="font-semibold text-[18px]" href="">Help</a>
          </div>
        </div>
      </div>
      <!-- To-do-list -->
      <div class="flex flex-col font-['Inter'] mt-[75px] ml-[145px]">
        <div>
          <span class="font-[600] text-[27px]">Manage Books</span>
        </div>

        <!-- Table Container with Border Radius -->
        <div
          class="mt-11 h-[500px] overflow-y-auto rounded-tl-[13.5px] rounded-tr-[13.5px] border border-gray-200"
        >
          <table
            id="table"
            class="table-fixed w-[950px] border-collapse text-[14px]"
          >
            <thead class="bg-[#88965E80] text-gray-800 font-semibold">
              <tr>
                <th class="px-4 py-3 border text-left w-[50px]">S.N.</th>
                <th class="px-8 py-3 border text-center w-[350px]">
                  Book Name
                </th>
                <th class="px-8 py-3 border text-center w-[150px]">
                  Author Name
                </th>
                <th class="px-8 py-3 border text-center w-[150px]">Category</th>
                <th class="px-8 py-3 border text-center w-[100px]">Price</th>
                <th class="px-8 py-3 border text-center w-[150px]">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white">
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 border">1</td>
                <td class="px-4 py-3 border text-center">
                  Mystery of the Lost Island
                </td>
                <td class="px-4 py-3 border text-center">Jane Smith</td>
                <td class="px-4 py-3 border text-center">Mystery</td>
                <td class="px-4 py-3 border text-center">Rs 500</td>
                <td class="px-4 py-3 border text-center">
                  <div id="btnContainer">
                    <div class="flex justify-center items-center space-x-2">
                      <button
                        class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded"
                      >
                        Edit
                      </button>
                      <button
                        class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 border">2</td>
                <td class="px-4 py-3 border text-center">Learning React</td>
                <td class="px-4 py-3 border text-center">Alex Johnson</td>
                <td class="px-4 py-3 border text-center">Technology</td>
                <td class="px-4 py-3 border text-center">Rs 500</td>
                <td class="px-4 py-3 border text-center">
                  <div id="btnContainer">
                    <div class="flex justify-center items-center space-x-2">
                      <button
                        class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded"
                      >
                        Edit
                      </button>
                      <button
                        class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 border">3</td>
                <td class="px-4 py-3 border text-center">Cooking Made Easy</td>
                <td class="px-4 py-3 border text-center">Emily Clark</td>
                <td class="px-4 py-3 border text-center">Cooking</td>
                <td class="px-4 py-3 border text-center">Rs 500</td>
                <td class="px-4 py-3 border text-center">
                  <div id="btnContainer">
                    <div class="flex justify-center items-center space-x-2">
                      <button
                        class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded"
                      >
                        Edit
                      </button>
                      <button
                        class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 border">4</td>
                <td class="px-4 py-3 border text-center">Echoes of the Past</td>
                <td class="px-4 py-3 border text-center">Michael Brown</td>
                <td class="px-4 py-3 border text-center">Historical Fiction</td>
                <td class="px-4 py-3 border text-center">Rs 500</td>
                <td class="px-4 py-3 border text-center">
                  <div id="btnContainer">
                    <div class="flex justify-center items-center space-x-2">
                      <button
                        class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded"
                      >
                        Edit
                      </button>
                      <button
                        class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Add this above your table inside the container where your table is -->
        <div class="mb-4 mt-[20px] flex items-center justify-between">
          <input
            type="text"
            id="newBookName"
            placeholder="Book Name"
            class="border border-black px-2 py-[8px] rounded w-[250px]"
          />
          <input
            type="text"
            id="newAuthorName"
            placeholder="Author Name"
            class="border border-black px-2 py-[8px] rounded w-[150px]"
          />
          <input
            type="text"
            id="newCategory"
            placeholder="Category"
            class="border border-black px-2 py-[8px] rounded w-[150px]"
          />
          <input
            type="text"
            id="newPrice"
            placeholder="Price"
            class="border border-black px-2 py-[8px] rounded w-[100px]"
          />
          <button
            id="createBtn"
            class="bg-blue-600 text-white px-4 py-[8px] rounded hover:bg-blue-700"
          >
            Create
          </button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
      // Global edit/delete handlers
      function handleDelete(e) {
        e.target.closest("tr").remove();
      }

      function attachDeleteEvents() {
        document.querySelectorAll(".deleteBtn").forEach((btn) => {
          btn.removeEventListener("click", handleDelete);
          btn.addEventListener("click", handleDelete);
        });
      }

      function handleEdit(e) {
        const editBtn = e.target;
        const row = editBtn.closest("tr");
        const cells = row.querySelectorAll("td");

        const originalValues = [];
        for (let i = 1; i <= 4; i++) {
          originalValues.push(cells[i].innerText.trim());
          cells[
            i
          ].innerHTML = `<input type="text" class="border border-gray-300 px-1 py-[2px] w-full text-sm rounded" value="${
            originalValues[i - 1]
          }">`;
        }

        const actionCell = cells[5];
        actionCell.innerHTML = `
      <div class="flex justify-center gap-2">
        <button class="saveBtn bg-green-600 text-white hover:bg-green-700 px-3 py-1 rounded">Save</button>
        <button class="cancelBtn bg-red-600 text-white hover:bg-red-700 px-3 py-1 rounded">Cancel</button>
      </div>
    `;

        actionCell.querySelector(".saveBtn").addEventListener("click", () => {
          for (let i = 1; i <= 4; i++) {
            const val = cells[i].querySelector("input").value;
            cells[i].innerText = val;
          }
          restoreActionButtons(actionCell);
        });

        actionCell.querySelector(".cancelBtn").addEventListener("click", () => {
          for (let i = 1; i <= 4; i++) {
            cells[i].innerText = originalValues[i - 1];
          }
          restoreActionButtons(actionCell);
        });
      }

      function attachEditEvents() {
        document.querySelectorAll(".editBtn").forEach((btn) => {
          btn.removeEventListener("click", handleEdit);
          btn.addEventListener("click", handleEdit);
        });
      }

      function restoreActionButtons(cell) {
        cell.innerHTML = `
      <div class="flex justify-center items-center space-x-2">
        <button class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded">Edit</button>
        <button class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded">Delete</button>
      </div>
    `;
        attachEditEvents();
        attachDeleteEvents();
      }

      // DOM Ready
      document.addEventListener("DOMContentLoaded", () => {
        // Sidebar toggle
        const menuItems = document.querySelectorAll(".button_upload");
        menuItems.forEach((item) => {
          item.addEventListener("click", () => {
            menuItems.forEach((i) => {
              i.classList.remove(
                "bg-[#88965E80]",
                "border",
                "border-[#88965E]"
              );
            });
            item.classList.add("bg-[#88965E80]", "border", "border-[#88965E]");
          });
        });

        // Initial binding
        attachEditEvents();
        attachDeleteEvents();

        // Create functionality
        const createBtn = document.getElementById("createBtn");
        createBtn.addEventListener("click", () => {
          const bookNameInput = document.getElementById("newBookName");
          const authorNameInput = document.getElementById("newAuthorName");
          const categoryInput = document.getElementById("newCategory");
          const priceInput = document.getElementById("newPrice");

          const bookName = bookNameInput.value.trim();
          const authorName = authorNameInput.value.trim();
          const category = categoryInput.value.trim();
          const price = priceInput.value.trim();

          if (!bookName || !authorName || !category || !price) {
            alert("Please fill in all fields to create a new book.");
            return;
          }

          const tbody = document.querySelector("#table tbody");
          const nextSN = tbody.querySelectorAll("tr").length + 1;

          const newRow = document.createElement("tr");
          newRow.classList.add("hover:bg-gray-50");
          newRow.innerHTML = `
        <td class="px-4 py-3 border">${nextSN}</td>
        <td class="px-4 py-3 border text-center">${bookName}</td>
        <td class="px-4 py-3 border text-center">${authorName}</td>
        <td class="px-4 py-3 border text-center">${category}</td>
        <td class="px-4 py-3 border text-center">${price}</td>
        <td class="px-4 py-3 border text-center">
          <div class="flex justify-center items-center space-x-2">
            <button class="editBtn text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded">Edit</button>
            <button class="deleteBtn text-red-600 bg-red-100 hover:bg-red-200 px-3 py-1 rounded">Delete</button>
          </div>
        </td>
      `;

          tbody.appendChild(newRow);

          // Clear inputs
          bookNameInput.value = "";
          authorNameInput.value = "";
          categoryInput.value = "";
          priceInput.value = "";

          // Bind new buttons
          attachEditEvents();
          attachDeleteEvents();
        });
      });
    </script>
  </body>
</html>
